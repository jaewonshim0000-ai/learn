# ✦ EduVision

**AI-powered educational question generator with geo-pinned learning**

EduVision lets you snap a photo of anything around you, choose an academic subject, and instantly get a multiple-choice question generated by AI that connects what you see to real learning concepts. Pin your questions to your GPS location so others nearby can discover and solve them — earning points based on question rarity.

---

## How It Works

1. **Upload any image** — a building, a plant, a street sign, food, artwork, anything
2. **Pick a subject** — Math, English, Science, History, or Art & Design
3. **Choose a difficulty** — Elementary, Middle School, or High School
4. **AI generates a question** — Claude Vision analyzes the image and creates a multiple-choice question (4 options) that ties specific visual elements to educational concepts
5. **Answer it** — get instant feedback with explanations
6. **Pin it to your location** — publish the question to Firestore so anyone nearby can discover it on the map
7. **Earn points** — every question has a randomly assigned rarity that determines how many points you earn for a correct answer

## Rarity System

Each generated question is assigned a rarity tier with weighted randomness:

| Rarity | Drop Rate | Points | Badge |
|---|---|---|---|
| ○ Common | 50% | 10 pts | Grey |
| ◆ Uncommon | 30% | 25 pts | Green |
| ★ Rare | 13% | 50 pts | Blue + glow |
| ◈ Epic | 5% | 100 pts | Purple + glow |
| ✦ Legendary | 2% | 250 pts | Gold + glow |

Points are tracked per user in Firestore. Each question can only be scored once — no farming the same question.

## Features

- **AI Vision Analysis** — Claude Sonnet 4 analyzes uploaded images and generates contextually relevant MCQ questions
- **Multiple Choice with Feedback** — 4 answer choices with instant correct/incorrect feedback and explanations
- **Interactive Map** — Leaflet + OpenStreetMap shows nearby questions as subject-colored pin markers with search radius controls (1km / 5km / 25km / 50km)
- **Google Sign-In** — Firebase Authentication with Google OAuth, persistent sessions
- **Cross-User Sharing** — all published questions are stored in Firestore and visible to every user
- **Points & Rarity** — gamified scoring system with animated point popups
- **My Questions Tab** — view all questions you've published with rarity badges
- **Responsive Design** — works on desktop and mobile browsers
- **View Modes** — split (map + list), map-only, or list-only in the Explore tab

## Tech Stack

- **Frontend:** React + TypeScript + Vite
- **AI:** Claude Sonnet 4 (Vision API) via Anthropic API
- **Auth:** Firebase Authentication (Google OAuth)
- **Database:** Firebase Cloud Firestore
- **Maps:** Leaflet + react-leaflet + OpenStreetMap tiles
- **Geolocation:** Browser Navigator API
- **Deployment:** Vercel (serverless functions + static hosting)

## Project Structure

```
├── api/
│   └── anthropic/v1/messages.js    # Vercel serverless proxy for Claude API
├── src/
│   ├── App.tsx                     # Main application (all UI + logic)
│   └── firebase.ts                 # Firebase config + auth exports
├── vercel.json                     # Vercel routing config
├── package.json
└── vite.config.ts
```

## Setup

### Prerequisites

- Node.js 18+
- A Firebase project
- An Anthropic API key

### 1. Clone & Install

```bash
git clone https://github.com/YOUR_USERNAME/eduvision.git
cd eduvision
npm install
```

### 2. Firebase Setup

1. Go to [Firebase Console](https://console.firebase.google.com) and create a new project
2. **Add a Web app** — copy the config object
3. **Enable Authentication** — go to Authentication → Sign-in method → enable **Google** → set a support email → save
4. **Create Firestore Database** — go to Firestore Database → Create database → choose **Start in test mode** → pick your nearest region
5. **Add your domain** — Authentication → Settings → Authorized domains → add `localhost` and your Vercel domain

Open `src/firebase.ts` and replace the placeholder config:

```typescript
const firebaseConfig = {
  apiKey: "your-api-key",
  authDomain: "your-project.firebaseapp.com",
  projectId: "your-project-id",
  storageBucket: "your-project.appspot.com",
  messagingSenderId: "your-sender-id",
  appId: "your-app-id",
};
```

### 3. Anthropic API Key

For local development, the Vite dev server proxies API calls. For production on Vercel:

1. Go to your Vercel project dashboard → Settings → Environment Variables
2. Add `ANTHROPIC_API_KEY` with your key (no `VITE_` prefix — it stays server-side)

### 4. Run Locally

```bash
npm run dev
```

Open `http://localhost:5173`. You'll need to allow location access for geo-pinning features.

### 5. Deploy to Vercel

```bash
npm i -g vercel
vercel
```

Or connect your GitHub repo to Vercel for automatic deployments.

## Firestore Security

The app ships with test-mode rules for rapid development. For production, update your Firestore rules:

```
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /questions/{questionId} {
      allow read: if true;
      allow create: if request.auth != null;
    }
    match /users/{userId} {
      allow read: if true;
      allow write: if request.auth != null && request.auth.uid == userId;
    }
  }
}
```

## Environment Variables

| Variable | Where | Description |
|---|---|---|
| `ANTHROPIC_API_KEY` | Vercel dashboard | Your Anthropic API key (server-side only) |
| Firebase config | `src/firebase.ts` | Firebase project credentials (client-side, committed) |

## License

MIT

---


